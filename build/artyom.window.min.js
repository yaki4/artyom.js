var Artyom=function(){function e(){this.ArtyomCommands=[],this.ArtyomspeechingText=null,this.ArtyomVoicesIdentifiers={"de-DE":["Google Deutsch","de-DE","de_DE"],"es-ES":["Google español","es-ES","es_ES","es-MX","es_MX"],"it-IT":["Google italiano","it-IT","it_IT"],"jp-JP":["Google 日本人","ja-JP","ja_JP"],"en-US":["Google US English","en-US","en_US"],"en-GB":["Google UK English Male","Google UK English Female","en-GB","en_GB"],"pt-BR":["Google português do Brasil","pt-PT","pt-BR","pt_PT","pt_BR"],"pt-PT":["Google português do Brasil","pt-PT","pt_PT"],"ru-RU":["Google русский","ru-RU","ru_RU"],"nl-NL":["Google Nederlands","nl-NL","nl_NL"],"fr-FR":["Google français","fr-FR","fr_FR"],"pl-PL":["Google polski","pl-PL","pl_PL"],"id-ID":["Google Bahasa Indonesia","id-ID","id_ID"],"hi-IN":["Google हिन्दी","hi-IN","hi_IN"],"zh-CN":["Google 普通话（中国大陆）","zh-CN","zh_CN"],"zh-HK":["Google 粤語（香港）","zh-HK","zh_HK"],native:["native"]},window.hasOwnProperty("speechSynthesis")?speechSynthesis.getVoices():console.error("Artyom.js can't speak without the Speech Synthesis API."),window.hasOwnProperty("webkitSpeechRecognition")?this.ArtyomWebkitSpeechRecognition=new window.webkitSpeechRecognition:console.error("Artyom.js can't recognize voice without the Speech Recognition API."),this.ArtyomProperties={lang:"en-GB",recognizing:!1,continuous:!1,speed:1,volume:1,listen:!1,mode:"normal",debug:!1,helpers:{redirectRecognizedTextOutput:null,remoteProcessorHandler:null,lastSay:null,fatalityPromiseCallback:null},executionKeyword:null,obeyKeyword:null,speaking:!1,obeying:!0,soundex:!1,name:null},this.ArtyomGarbageCollection=[],this.ArtyomFlags={restartRecognition:!1},this.ArtyomGlobalEvents={ERROR:"ERROR",SPEECH_SYNTHESIS_START:"SPEECH_SYNTHESIS_START",SPEECH_SYNTHESIS_END:"SPEECH_SYNTHESIS_END",TEXT_RECOGNIZED:"TEXT_RECOGNIZED",COMMAND_RECOGNITION_START:"COMMAND_RECOGNITION_START",COMMAND_RECOGNITION_END:"COMMAND_RECOGNITION_END",COMMAND_MATCHED:"COMMAND_MATCHED",NOT_COMMAND_MATCHED:"NOT_COMMAND_MATCHED"},this.Device={isMobile:!1,isChrome:!0},(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(this.Device.isMobile=!0),navigator.userAgent.indexOf("Chrome")==-1&&(this.Device.isChrome=!1),this.ArtyomVoice={default:!1,lang:"en-GB",localService:!1,name:"Google UK English Male",voiceURI:"Google UK English Male"}}return e.prototype.addCommands=function(e){var t=this,o=function(e){e.hasOwnProperty("indexes")?t.ArtyomCommands.push(e):console.error("The given command doesn't provide any index to execute.")};if(e instanceof Array)for(var r=0;r<e.length;r++)o(e[r]);else o(e);return!0},e.prototype.clearGarbageCollection=function(){return this.ArtyomGarbageCollection=[]},e.prototype.debug=function(e,t){var o="[v"+this.getVersion()+"] Artyom.js";if(this.ArtyomProperties.debug===!0)switch(t){case"error":console.log("%c"+o+":%c "+e,"background: #C12127; color: black;","color:black;");break;case"warn":console.warn(e);break;case"info":console.log("%c"+o+":%c "+e,"background: #4285F4; color: #FFFFFF","color:black;");break;default:var r=e.substring(0,2);">>"===r?this.ArtyomspeechingText=e.substring(3,e.length):"Normal mode : "===e.substring(0,14)&&(this.ArtyomspeechingText=e.substring(14,e.length))}},e.prototype.detectErrors=function(){var e=this;if("file:"==window.location.protocol){var t="Error: running Artyom directly from a file. The APIs require a different communication protocol like HTTP or HTTPS";return console.error(t),{code:"artyom_error_localfile",message:t}}if(!e.Device.isChrome){var t="Error: the Speech Recognition and Speech Synthesis APIs require the Google Chrome Browser to work.";return console.error(t),{code:"artyom_error_browser_unsupported",message:t}}return"https:"!=window.location.protocol&&console.warn("Warning: artyom is being executed using the '"+window.location.protocol+"' protocol. The continuous mode requires a secure protocol (HTTPS)"),!1},e.prototype.emptyCommands=function(){return this.ArtyomCommands=[]},e.prototype.execute=function(e){var t=this;if(!e)return void console.warn("Internal error: Execution of empty command");if(t.ArtyomProperties.name){if(0!=e.indexOf(t.ArtyomProperties.name))return void t.debug('Artyom requires with a name "'+t.ArtyomProperties.name+"\" but the name wasn't spoken.","warn");e=e.substr(t.ArtyomProperties.name.length)}t.debug(">> "+e);for(var o=0;o<t.ArtyomCommands.length;o++){for(var r=t.ArtyomCommands[o],n=r.indexes,i=-1,s="",a=0;a<n.length;a++){var c=n[a];if(r.smart){if(c instanceof RegExp)c.test(e)&&(t.debug(">> REGEX "+c.toString()+" MATCHED AGAINST "+e+" WITH INDEX "+a+" IN COMMAND ","info"),i=parseInt(a.toString()));else if(c.indexOf("*")!=-1){var u=c.split("*");if(u.length>2){console.warn("Artyom found a smart command with "+(u.length-1)+" wildcards. Artyom only support 1 wildcard for each command. Sorry");continue}var l=u[0],p=u[1];""==p||" "==p?e.indexOf(l)==-1&&e.toLowerCase().indexOf(l.toLowerCase())==-1||(s=e.replace(l,""),s=s.toLowerCase().replace(l.toLowerCase(),""),i=parseInt(a.toString())):e.indexOf(l)==-1&&e.toLowerCase().indexOf(l.toLowerCase())==-1||e.indexOf(p)==-1&&e.toLowerCase().indexOf(p.toLowerCase())==-1||(s=e.replace(l,"").replace(p,""),s=s.toLowerCase().replace(l.toLowerCase(),"").replace(p.toLowerCase(),""),s=s.toLowerCase().replace(p.toLowerCase(),""),i=parseInt(a.toString()))}else console.warn("Founded command marked as SMART but have no wildcard in the indexes, remove the SMART for prevent extensive memory consuming or add the wildcard *");if(i>=0){i=parseInt(a.toString());break}}}if(i>=0){t.triggerEvent(t.ArtyomGlobalEvents.COMMAND_MATCHED);var m={index:i,instruction:r,wildcard:{item:s,full:e}};return m}}for(var o=0;o<t.ArtyomCommands.length;o++){for(var r=t.ArtyomCommands[o],n=r.indexes,i=-1,a=0;a<n.length;a++){var c=n[a];if(!r.smart){if(e===c){t.debug(">> MATCHED FULL EXACT OPTION "+c+" AGAINST "+e+" WITH INDEX "+a+" IN COMMAND ","info"),i=parseInt(a.toString());break}if(e.toLowerCase()===c.toLowerCase()){t.debug(">> MATCHED OPTION CHANGING ALL TO LOWERCASE "+c+" AGAINST "+e+" WITH INDEX "+a+" IN COMMAND ","info"),i=parseInt(a.toString());break}}}if(i>=0){t.triggerEvent(t.ArtyomGlobalEvents.COMMAND_MATCHED);var m={index:i,instruction:r};return m}}for(var o=0;o<t.ArtyomCommands.length;o++){for(var r=t.ArtyomCommands[o],n=r.indexes,i=-1,a=0;a<n.length;a++)if(!r.smart){var c=n[a];if(e.indexOf(c)>=0){t.debug(">> MATCHED INDEX EXACT OPTION "+c+" AGAINST "+e+" WITH INDEX "+a+" IN COMMAND ","info"),i=parseInt(a.toString());break}if(e.toLowerCase().indexOf(c.toLowerCase())>=0){t.debug(">> MATCHED INDEX OPTION CHANGING ALL TO LOWERCASE "+c+" AGAINST "+e+" WITH INDEX "+a+" IN COMMAND ","info"),i=parseInt(a.toString());break}}if(i>=0){t.triggerEvent(t.ArtyomGlobalEvents.COMMAND_MATCHED);var m={index:i,instruction:r};return m}}if(t.ArtyomProperties.soundex)for(var o=0;o<t.ArtyomCommands.length;o++)for(var r=t.ArtyomCommands[o],n=r.indexes,i=-1,a=0;a<n.length;a++){var c=n[a];if(!r.smart&&t.soundex(e)==t.soundex(c)){t.debug(">> Matched Soundex command '"+c+"' AGAINST '"+e+"' with index "+a,"info"),i=parseInt(a.toString()),t.triggerEvent(t.ArtyomGlobalEvents.COMMAND_MATCHED);var m={index:i,instruction:r};return m}}t.debug("Event reached : "+t.ArtyomGlobalEvents.NOT_COMMAND_MATCHED),t.triggerEvent(t.ArtyomGlobalEvents.NOT_COMMAND_MATCHED)},e.prototype.fatality=function(){var e=this;return new Promise(function(t,o){e.ArtyomProperties.helpers.fatalityPromiseCallback=t;try{e.ArtyomFlags.restartRecognition=!1,e.ArtyomWebkitSpeechRecognition.stop()}catch(e){o(e)}})},e.prototype.getAvailableCommands=function(){return this.ArtyomCommands},e.prototype.getVoices=function(){return window.speechSynthesis.getVoices()},e.prototype.speechSupported=function(){return"speechSynthesis"in window},e.prototype.recognizingSupported=function(){return"webkitSpeechRecognition"in window},e.prototype.shutUp=function(){if("speechSynthesis"in window)do window.speechSynthesis.cancel();while(window.speechSynthesis.pending===!0);this.ArtyomProperties.speaking=!1,this.clearGarbageCollection()},e.prototype.getProperties=function(){return this.ArtyomProperties},e.prototype.getLanguage=function(){return this.ArtyomProperties.lang},e.prototype.getVersion=function(){return"1.0.6"},e.prototype.hey=function(e,t){var o,r,n=this;this.Device.isMobile?(this.ArtyomWebkitSpeechRecognition.continuous=!1,this.ArtyomWebkitSpeechRecognition.interimResults=!1,this.ArtyomWebkitSpeechRecognition.maxAlternatives=1):(this.ArtyomWebkitSpeechRecognition.continuous=!0,this.ArtyomWebkitSpeechRecognition.interimResults=!0),this.ArtyomWebkitSpeechRecognition.lang=this.ArtyomProperties.lang,this.ArtyomWebkitSpeechRecognition.onstart=function(){n.debug("Event reached : "+n.ArtyomGlobalEvents.COMMAND_RECOGNITION_START),n.triggerEvent(n.ArtyomGlobalEvents.COMMAND_RECOGNITION_START),n.ArtyomProperties.recognizing=!0,r=!0,e()},this.ArtyomWebkitSpeechRecognition.onerror=function(e){t(e.error),n.triggerEvent(n.ArtyomGlobalEvents.ERROR,{code:e.error}),"audio-capture"==e.error&&(r=!1),"not-allowed"==e.error&&(r=!1,e.timeStamp-o<100?n.triggerEvent(n.ArtyomGlobalEvents.ERROR,{code:"info-blocked",message:"Artyom needs the permision of the microphone, is blocked."}):n.triggerEvent(n.ArtyomGlobalEvents.ERROR,{code:"info-denied",message:"Artyom needs the permision of the microphone, is denied"}))},n.ArtyomWebkitSpeechRecognition.onend=function(){n.ArtyomFlags.restartRecognition===!0?(r===!0?(n.ArtyomWebkitSpeechRecognition.start(),n.debug("Continuous mode enabled, restarting","info")):console.error("Verify the microphone and check for the table of errors in sdkcarlos.github.io/sites/artyom.html to solve your problem. If you want to give your user a message when an error appears add an artyom listener"),n.triggerEvent(n.ArtyomGlobalEvents.COMMAND_RECOGNITION_END,{code:"continuous_mode_enabled",message:"OnEnd event reached with continuous mode"})):n.ArtyomProperties.helpers.fatalityPromiseCallback&&(setTimeout(function(){n.ArtyomProperties.helpers.fatalityPromiseCallback()},500),n.triggerEvent(n.ArtyomGlobalEvents.COMMAND_RECOGNITION_END,{code:"continuous_mode_disabled",message:"OnEnd event reached without continuous mode"})),n.ArtyomProperties.recognizing=!1};var i;if("normal"==n.ArtyomProperties.mode&&(i=function(e){if(!n.ArtyomCommands.length)return void n.debug("No commands to process in normal mode.");var t=e.results.length;n.triggerEvent(n.ArtyomGlobalEvents.TEXT_RECOGNIZED);for(var o=e.resultIndex;o<t;++o){var r=e.results[o][0].transcript;if(e.results[o].isFinal){var i=n.execute(r.trim());if("function"==typeof n.ArtyomProperties.helpers.redirectRecognizedTextOutput&&n.ArtyomProperties.helpers.redirectRecognizedTextOutput(r,!0),i&&1==n.ArtyomProperties.recognizing){n.debug("<< Executing Matching Recognition in normal mode >>","info"),n.ArtyomWebkitSpeechRecognition.stop(),n.ArtyomProperties.recognizing=!1,i.wildcard?i.instruction.action(i.index,i.wildcard.item,i.wildcard.full):i.instruction.action(i.index);break}}else{if("function"==typeof n.ArtyomProperties.helpers.redirectRecognizedTextOutput&&n.ArtyomProperties.helpers.redirectRecognizedTextOutput(r,!1),"string"==typeof n.ArtyomProperties.executionKeyword&&r.indexOf(n.ArtyomProperties.executionKeyword)!=-1){var i=n.execute(r.replace(n.ArtyomProperties.executionKeyword,"").trim());if(i&&1==n.ArtyomProperties.recognizing){n.debug("<< Executing command ordered by ExecutionKeyword >>","info"),n.ArtyomWebkitSpeechRecognition.stop(),n.ArtyomProperties.recognizing=!1,i.wildcard?i.instruction.action(i.index,i.wildcard.item,i.wildcard.full):i.instruction.action(i.index);break}}n.debug("Normal mode : "+r)}}}),"quick"==n.ArtyomProperties.mode&&(i=function(e){if(!n.ArtyomCommands.length)return void n.debug("No commands to process.");var t=e.results.length;n.triggerEvent(n.ArtyomGlobalEvents.TEXT_RECOGNIZED);for(var o=e.resultIndex;o<t;++o){var r=e.results[o][0].transcript;if(e.results[o].isFinal){var i=n.execute(r.trim());if("function"==typeof n.ArtyomProperties.helpers.redirectRecognizedTextOutput&&n.ArtyomProperties.helpers.redirectRecognizedTextOutput(r,!1),i&&1==n.ArtyomProperties.recognizing){n.debug("<< Executing Matching Recognition in quick mode >>","info"),n.ArtyomWebkitSpeechRecognition.stop(),n.ArtyomProperties.recognizing=!1,i.wildcard?i.instruction.action(i.index,i.wildcard.item):i.instruction.action(i.index);break}}else{var i=n.execute(r.trim());if("function"==typeof n.ArtyomProperties.helpers.redirectRecognizedTextOutput&&n.ArtyomProperties.helpers.redirectRecognizedTextOutput(r,!0),i&&1==n.ArtyomProperties.recognizing){n.debug("<< Executing Matching Recognition in quick mode >>","info"),n.ArtyomWebkitSpeechRecognition.stop(),n.ArtyomProperties.recognizing=!1,i.wildcard?i.instruction.action(i.index,i.wildcard.item):i.instruction.action(i.index);break}}n.debug("Quick mode : "+r)}}),"remote"==n.ArtyomProperties.mode&&(i=function(e){var t=e.results.length;if(n.triggerEvent(n.ArtyomGlobalEvents.TEXT_RECOGNIZED),"function"!=typeof n.ArtyomProperties.helpers.remoteProcessorHandler)return n.debug("The remoteProcessorService is undefined.","warn");for(var o=e.resultIndex;o<t;++o){var r=e.results[o][0].transcript;n.ArtyomProperties.helpers.remoteProcessorHandler({text:r,isFinal:e.results[o].isFinal})}}),n.ArtyomWebkitSpeechRecognition.onresult=function(e){if(n.ArtyomProperties.obeying)i(e);else{if(!n.ArtyomProperties.obeyKeyword)return;for(var t="",o="",r=0;r<e.results.length;++r)e.results[r].isFinal?t+=e.results[r][0].transcript:o+=e.results[r][0].transcript;n.debug("Artyom is not obeying","warn"),(o.indexOf(n.ArtyomProperties.obeyKeyword)>-1||t.indexOf(n.ArtyomProperties.obeyKeyword)>-1)&&(n.ArtyomProperties.obeying=!0)}},n.ArtyomProperties.recognizing)n.ArtyomWebkitSpeechRecognition.stop(),n.debug("Event reached : "+n.ArtyomGlobalEvents.COMMAND_RECOGNITION_END),n.triggerEvent(n.ArtyomGlobalEvents.COMMAND_RECOGNITION_END);else try{n.ArtyomWebkitSpeechRecognition.start()}catch(e){n.triggerEvent(n.ArtyomGlobalEvents.ERROR,{code:"recognition_overlap",message:"A webkitSpeechRecognition instance has been started while there's already running. Is recommendable to restart the Browser"})}},e.prototype.initialize=function(e){var t=this;return"object"!=typeof e?Promise.reject("You must give the configuration for start artyom properly."):(e.hasOwnProperty("lang")&&(t.ArtyomVoice=t.getVoice(e.lang),t.ArtyomProperties.lang=e.lang),e.hasOwnProperty("continuous")&&(e.continuous?(this.ArtyomProperties.continuous=!0,this.ArtyomFlags.restartRecognition=!0):(this.ArtyomProperties.continuous=!1,this.ArtyomFlags.restartRecognition=!1)),e.hasOwnProperty("speed")&&(this.ArtyomProperties.speed=e.speed),e.hasOwnProperty("soundex")&&(this.ArtyomProperties.soundex=e.soundex),e.hasOwnProperty("executionKeyword")&&(this.ArtyomProperties.executionKeyword=e.executionKeyword),e.hasOwnProperty("obeyKeyword")&&(this.ArtyomProperties.obeyKeyword=e.obeyKeyword),e.hasOwnProperty("volume")&&(this.ArtyomProperties.volume=e.volume),e.hasOwnProperty("listen")&&(this.ArtyomProperties.listen=e.listen),e.hasOwnProperty("name")&&(this.ArtyomProperties.name=e.name),e.hasOwnProperty("debug")?this.ArtyomProperties.debug=e.debug:console.warn("The initialization doesn't provide how the debug mode should be handled. Is recommendable to set this value either to true or false."),e.mode&&(this.ArtyomProperties.mode=e.mode),this.ArtyomProperties.listen===!0?new Promise(function(e,o){t.hey(e,o)}):Promise.resolve(!0))},e.prototype.on=function(e,t){var o=this;return{then:function(r){var n={indexes:e,action:r};t&&(n.smart=!0),o.addCommands(n)}}},e.prototype.triggerEvent=function(e,t){var o=new CustomEvent(e,{detail:t});return document.dispatchEvent(o),o},e.prototype.repeatLastSay=function(e){var t=this.ArtyomProperties.helpers.lastSay;return e?t:void(null!=t&&this.say(t.text))},e.prototype.when=function(e,t){return document.addEventListener(e,function(e){t(e.detail)},!1)},e.prototype.remoteProcessorService=function(e){return this.ArtyomProperties.helpers.remoteProcessorHandler=e,!0},e.prototype.voiceAvailable=function(e){return"undefined"!=typeof this.getVoice(e)},e.prototype.isObeying=function(){return this.ArtyomProperties.obeying},e.prototype.obey=function(){return this.ArtyomProperties.obeying=!0},e.prototype.dontObey=function(){return this.ArtyomProperties.obeying=!1},e.prototype.isSpeaking=function(){return this.ArtyomProperties.speaking},e.prototype.isRecognizing=function(){return this.ArtyomProperties.recognizing},e.prototype.getNativeApi=function(){return this.ArtyomWebkitSpeechRecognition},e.prototype.getGarbageCollection=function(){return this.ArtyomGarbageCollection},e.prototype.getVoice=function(e){var t=this.ArtyomVoicesIdentifiers[e];t||(console.warn("The providen language "+e+" isn't available, using English Great britain as default"),t=this.ArtyomVoicesIdentifiers["en-GB"]);for(var o=void 0,r=speechSynthesis.getVoices(),n=t.length,i=function(e){var n=r.filter(function(o){return o.name==t[e]||o.lang==t[e]})[0];if(n)return o=n,"break"},s=0;s<n;s++){var a=i(s);if("break"===a)break}return o},e.prototype.newDictation=function(e){var t=this;if(!t.recognizingSupported())return console.error("SpeechRecognition is not supported in this browser"),!1;var o=new window.webkitSpeechRecognition;return o.continuous=!0,o.interimResults=!0,o.lang=t.ArtyomProperties.lang,o.onresult=function(t){for(var o="",r="",n=0;n<t.results.length;++n)t.results[n].isFinal?o+=t.results[n][0].transcript:r+=t.results[n][0].transcript;e.onResult&&e.onResult(r,o)},new function(){var t=o,r=!0,n=!1;this.onError=null,this.start=function(){e.continuous===!0&&(n=!0),t.onstart=function(){"function"==typeof e.onStart&&r===!0&&e.onStart()},t.onend=function(){n===!0?(r=!1,t.start()):(r=!0,"function"==typeof e.onEnd&&e.onEnd())},t.start()},this.stop=function(){n=!1,t.stop()},"function"==typeof e.onError&&(t.onerror=e.onError)}},e.prototype.newPrompt=function(e){"object"!=typeof e&&console.error("Expected the prompt configuration.");var t=Object.assign([],this.ArtyomCommands),o=this;this.emptyCommands();var r={description:"Setting the artyom commands only for the prompt. The commands will be restored after the prompt finishes",indexes:e.options,action:function(r,n){o.ArtyomCommands=t;var i=e.onMatch(r,n);return"function"!=typeof i?void console.error("onMatch function expects a returning function to be executed"):void i()}};e.smart&&(r.smart=!0),this.addCommands(r),"undefined"!=typeof e.beforePrompt&&e.beforePrompt();var n={onStart:function(){"undefined"!=typeof e.onStartPrompt&&e.onStartPrompt()},onEnd:function(){"undefined"!=typeof e.onEndPrompt&&e.onEndPrompt()}};this.say(e.question,n)},e.prototype.sayRandom=function(e){if(e instanceof Array){var t=Math.floor(Math.random()*e.length);return this.say(e[t]),{text:e[t],index:t}}return console.error("Random quotes must be in an array !"),null},e.prototype.setDebug=function(e){return e?this.ArtyomProperties.debug=!0:this.ArtyomProperties.debug=!1},e.prototype.simulateInstruction=function(e){var t=this;if(!e||"string"!=typeof e)return console.warn("Cannot execute a non string command"),!1;var o=t.execute(e);return"object"!=typeof o?(console.warn("No command founded trying with "+e),!1):o.instruction?(o.instruction.smart?(t.debug("Smart command matches with simulation, executing","info"),o.instruction.action(o.index,o.wildcard.item,o.wildcard.full)):(t.debug("Command matches with simulation, executing","info"),o.instruction.action(o.index)),!0):void 0},e.prototype.soundex=function(e){var t=e.toLowerCase().split(""),o=t.shift(),r="",n={a:"",e:"",i:"",o:"",u:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,d:3,t:3,l:4,m:5,n:5,r:6};return r=o+t.map(function(e,t,o){return n[e]}).filter(function(e,t,r){return 0===t?e!==n[o]:e!==r[t-1]}).join(""),(r+"000").slice(0,4).toUpperCase()},e.prototype.splitStringByChunks=function(e,t){e=e||"",t=t||100;for(var o=t,r=0,n=[];e[o];)" "==e[o++]&&(n.push(e.substring(r,o)),r=o,o+=t);return n.push(e.substr(r)),n},e.prototype.redirectRecognizedTextOutput=function(e){return"function"!=typeof e?(console.warn("Expected function to handle the recognized text ..."),!1):(this.ArtyomProperties.helpers.redirectRecognizedTextOutput=e,!0)},e.prototype.restart=function(){var e=this,t=e.ArtyomProperties;return new Promise(function(o,r){e.fatality().then(function(){e.initialize(t).then(o,r)})})},e.prototype.talk=function(e,t,o,r){var n=this,i=new SpeechSynthesisUtterance;i.text=e,i.volume=this.ArtyomProperties.volume,i.rate=this.ArtyomProperties.speed;var s=n.getVoice(n.ArtyomProperties.lang);r&&r.hasOwnProperty("lang")&&(s=n.getVoice(r.lang)),this.Device.isMobile?s&&(i.lang=s.lang):i.voice=s,1==t&&i.addEventListener("start",function(){n.ArtyomProperties.speaking=!0,n.debug("Event reached : "+n.ArtyomGlobalEvents.SPEECH_SYNTHESIS_START),n.triggerEvent(n.ArtyomGlobalEvents.SPEECH_SYNTHESIS_START),r&&"function"==typeof r.onStart&&r.onStart.call(i)}),t>=o&&i.addEventListener("end",function(){n.ArtyomProperties.speaking=!1,n.debug("Event reached : "+n.ArtyomGlobalEvents.SPEECH_SYNTHESIS_END),n.triggerEvent(n.ArtyomGlobalEvents.SPEECH_SYNTHESIS_END),r&&"function"==typeof r.onEnd&&r.onEnd.call(i)}),this.debug(t+" text chunk processed succesfully out of "+o),this.ArtyomGarbageCollection.push(i),window.speechSynthesis.speak(i)},e.prototype.say=function(e,t){var o=115,r=this,n=[];if(this.speechSupported()){if("string"!=typeof e)return console.warn("Artyom expects a string to speak "+typeof e+" given");if(!e.length)return console.warn("Cannot speak empty string");if(e.length>o){var i=e.split(/,|:|\. |;/);i.forEach(function(e,t){if(e.length>o){var i=r.splitStringByChunks(e,o);n.push.apply(n,i)}else n.push(e)})}else n.push(e);n=n.filter(function(e){return e}),n.forEach(function(e,o){var i=o+1;e&&r.talk(e,i,n.length,t)}),r.ArtyomProperties.helpers.lastSay={text:e,date:new Date}}},e}();